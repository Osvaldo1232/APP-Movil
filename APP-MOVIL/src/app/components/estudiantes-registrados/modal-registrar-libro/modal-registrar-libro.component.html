<div class="modal-container">

  <ion-button fill="clear" class="btn-cerrar" (click)="cerrarModal()">
    <ion-icon slot="icon-only" name="close"></ion-icon>
  </ion-button>

  <h2 class="modal-titulo">
    {{ libroEditar ? 'Editar Libro' : 'Registrar Libro' }}
  </h2>

  <form class="formulario">

    <div class="form-group">
      <ion-label>Titulo</ion-label>

      <ion-input [(ngModel)]="libro.titulo" name="titulo"
                 placeholder="Título" class="custom-input"></ion-input>
    </div>

    <div class="form-group">
      <ion-label>Autores</ion-label>
      <ion-select [(ngModel)]="libro.autores" name="autores" multiple="true"
                  interface="alert" placeholder="Selecciona autores">
        <ion-select-option *ngFor="let a of autores" [value]="a.id">
          {{ a.nombre }}
        </ion-select-option>
      </ion-select>
    </div>

    <div class="form-group">
      <ion-label>Categoría</ion-label>
      <ion-select [(ngModel)]="libro.categoria" name="categoria"
                  interface="popover" placeholder="Selecciona categoría">
        <ion-select-option *ngFor="let c of categorias" [value]="c.id">
          {{ c.nombre }}
        </ion-select-option>
      </ion-select>
    </div>

    <div class="form-group">
      <ion-label>Año Publicación</ion-label>

      <ion-input [(ngModel)]="libro.anioPublicacion" name="anioPublicacion"
                 type="number" min="1000" [max]="currentYear"
                 placeholder="Año de Publicación" class="custom-input"></ion-input>
    </div>

    <div class="form-group">
      <ion-label>Editorial</ion-label>

      <ion-input [(ngModel)]="libro.editorial" name="editorial" type="text"
                 placeholder="Editorial" class="custom-input"></ion-input>
    </div>

    <div class="form-group">
      <ion-label>Copias Disponibles</ion-label>

      <ion-input [(ngModel)]="libro.copiasDisponibles" name="copiasDisponibles"
                 type="number" min="0" placeholder="Copias Disponibles"
                 class="custom-input"></ion-input>
    </div>

     <div class="form-group">
      <ion-label>Total copias</ion-label>

      <ion-input [(ngModel)]="libro.totalCopias" name="totalCopias"
                 type="number" min="0" placeholder="Total Copias"
                 class="custom-input"></ion-input>
    </div>

    <div class="form-group">
      <ion-label>Sipnosis</ion-label>

      <ion-textarea [(ngModel)]="libro.sinopsis" name="sinopsis"
                    placeholder="Sinopsis" class="custom-input"></ion-textarea>
    </div>

    <div class="form-group">
      <ion-label>Imagen del Libro</ion-label>
      <input type="file" accept="image/*" (change)="convertirImagenBase64($event)">
    </div>

  <div *ngIf="libro.imagenBase64" class="imagen-container">
  <img 
    [src]="'data:image/jpeg;base64,' + libro.imagenBase64"
    class="imagen-libro"
  >
</div>


    <div class="form-group">
      <ion-item lines="none">
        <ion-label>Estatus</ion-label>
        <div>{{ libro.estatus ? 'Activo' : 'Inactivo' }}</div>
        <ion-toggle [(ngModel)]="libro.estatus" name="estatus" color="success"></ion-toggle>
      </ion-item>
    </div>

    <div class="botones-container">
      <ion-button fill="outline" class="btn-cancelar" (click)="cerrarModal()">
        Cancelar
      </ion-button>

      <ion-button fill="solid" class="btn-aceptar" (click)="aceptar()">
        {{ libroEditar ? 'Actualizar' : 'Aceptar' }}
      </ion-button>
    </div>

  </form>

</div>
